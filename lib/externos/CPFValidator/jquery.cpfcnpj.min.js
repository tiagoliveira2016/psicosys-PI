!function(n){function a(i,n){var a=(n=void 0!=n&&n)?/^\d{2}\.\d{3}\.\d{3}\/\d{4}\-\d{2}$/:/^[0-9]{14}$/,t=i.match(a);if(null!=t){var r,e="",l="",u="",f="",d="";n?(e=t[0],l=t[1],u=t[2],f=t[3],d=t[4]):(e=i.substring(0,2),l=i.substring(2,5),u=i.substring(5,8),f=i.substring(8,12),d=i.substring(12,14));var o=!0;s=e+l+u+f+d,c=s.substr(0,12);var v=s.substr(12,2),m=0;for(r=0;r<12;r++)m+=c.charAt(11-r)*(2+r%8);for(0==m&&(o=!1),(m=11-m%11)>9&&(m=0),v.charAt(0)!=m&&(o=!1),m*=2,r=0;r<12;r++)m+=c.charAt(11-r)*(2+(r+1)%8);return(m=11-m%11)>9&&(m=0),v.charAt(1)!=m&&(o=!1),o}return!1}function t(n,a){var s=void 0!=a&&a?/^\d{3}\.\d{3}\.\d{3}\-\d{2}$/:/^[0-9]{11}$/;if(null!=n.match(s)){if(null!=n.match(/\b(.+).*(\1.*){10,}\b/g))return!1;var t,r,e=n.replace(/\D/g,"");for(t=0,i=1;i<=9;i++)t+=parseInt(e.substring(i-1,i))*(11-i);if(10!=(r=10*t%11)&&11!=r||(r=0),r!=parseInt(e.substring(9,10)))return!1;for(t=0,i=1;i<=10;i++)t+=parseInt(e.substring(i-1,i))*(12-i);return 10!=(r=10*t%11)&&11!=r||(r=0),r==parseInt(e.substring(10,11))}return!1}n.fn.cpfcnpj=function(i){var s=n.extend({mask:!1,validate:"cpfcnpj",event:"focusout",handler:n(this),validateOnlyFocus:!1,ifValid:null,ifInvalid:null},i);if(s.mask)if(null==jQuery().mask)s.mask=!1,console.log("jQuery mask not found.");else{var r=n(this);if("cpf"==s.validate)r.mask("000.000.000-00");else if("cnpj"==s.validate)r.mask("00.000.000/0000-00");else{var e="000.000.000-009",l={onKeyPress:function(i){var n=["000.000.000-009","00.000.000/0000-00"];e=i.length>14?n[1]:n[0],r.mask(e,l)}};r.mask(e,l)}}return this.each(function(){var i=null,r=n(this);n(document).on(s.event,s.handler,function(){if(!s.validateOnlyFocus||s.validateOnlyFocus&&r.is(":focus")){var e=r.val(),l=e.length;if(i=!1,11!=l&&14!=l&&18!=l||("cpf"==s.validate?i=t(e,s.mask):"cnpj"==s.validate?i=a(e,s.mask):"cpfcnpj"==s.validate&&(t(e,s.mask)?(i=!0,"cpf"):a(e,s.mask)&&(i=!0,"cnpj"))),n.isFunction(s.ifValid))if(null!=i&&i){if(n.isFunction(s.ifValid)){var u=n.Callbacks();u.add(s.ifValid),u.fire(r)}}else n.isFunction(s.ifInvalid)&&s.ifInvalid(r)}})})}}(jQuery);